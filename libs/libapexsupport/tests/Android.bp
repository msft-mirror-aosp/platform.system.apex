package {
    default_applicable_licenses: ["Android-Apache-2.0"],
}

apex {
    name: "libapexsupport-tests-apex",
    vendor: true,
    installable: false,
    updatable: false,
    manifest: "manifest.json",
    file_contexts: "file_contexts",
    key: "com.android.apex.vendor.foo.key",
    certificate: ":com.android.apex.vendor.foo.certificate",

    binaries: ["libapexsupport-tests"],
}

cc_test {
    name: "libapexsupport-tests",
    srcs: ["libapexsupport-tests.cpp"],
    shared_libs: ["libapexsupport"],
    static_libs: ["libgmock"],
    vendor: true,
    installable: false,
}

sh_test_host {
    name: "libapexsupport-tests.sh",
    src: "libapexsupport-tests.sh",
    test_suites: ["general-tests"], // not device-specific
    test_options: {
        unit_test: false,
    },
    data: [
        ":libapexsupport-tests-apex",
    ],
}
